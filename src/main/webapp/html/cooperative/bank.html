<!DOCTYPE html>
<html>

<head>
    <!--合作银行管理-->
    <title>合作银行管理</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:300,400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
    <!-- CSS Libs -->
    <link rel="stylesheet" type="text/css" href="../../lib/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/animate.min.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/bootstrap-switch.min.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/checkbox3.min.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/dataTables.bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/page.css">
    <!-- CSS App -->
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
    <link rel="stylesheet" type="text/css" href="../../css/themes/flat-blue.css">
</head>

<body class="flat-blue">
<div class="app-container">
    <div class="row content-container">
        <nav class="navbar navbar-default navbar-fixed-top navbar-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-expand-toggle">
                        <i class="fa fa-bars icon"></i>
                    </button>
                    <ol class="breadcrumb navbar-breadcrumb">
                        <li>合作管理</li>
                        <li class="active">合作银行管理</li>
                    </ol>
                    <button type="button" class="navbar-right-expand-toggle pull-right visible-xs">
                        <i class="fa fa-th icon"></i>
                    </button>
                </div>
                <ul class="nav navbar-nav navbar-right">
                    <button type="button" class="navbar-right-expand-toggle pull-right visible-xs">
                        <i class="fa fa-times icon"></i>
                    </button>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-comments-o"></i></a>
                        <ul class="dropdown-menu animated fadeInDown">
                            <li class="title">
                                Notification <span class="badge pull-right">0</span>
                            </li>
                            <li class="message">
                                No new notification
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown danger">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-star-half-o"></i> 4</a>
                        <ul class="dropdown-menu danger  animated fadeInDown">
                            <li class="title">
                                Notification <span class="badge pull-right">4</span>
                            </li>
                            <li>
                                <ul class="list-group notifications">
                                    <a href="#">
                                        <li class="list-group-item">
                                            <span class="badge">1</span> <i class="fa fa-exclamation-circle icon"></i> new registration
                                        </li>
                                    </a>
                                    <a href="#">
                                        <li class="list-group-item">
                                            <span class="badge success">1</span> <i class="fa fa-check icon"></i> new orders
                                        </li>
                                    </a>
                                    <a href="#">
                                        <li class="list-group-item">
                                            <span class="badge danger">2</span> <i class="fa fa-comments icon"></i> customers messages
                                        </li>
                                    </a>
                                    <a href="#">
                                        <li class="list-group-item message">
                                            view all
                                        </li>
                                    </a>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown profile">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Emily Hart <span class="caret"></span></a>
                        <ul class="dropdown-menu animated fadeInDown">
                            <li class="profile-img">
                                <img src="../../img/profile/picjumbo.com_HNCK4153_resize.jpg" class="profile-img">
                            </li>
                            <li>
                                <div class="profile-info">
                                    <h4 class="username">Emily Hart</h4>
                                    <p>emily_hart@email.com</p>
                                    <div class="btn-group margin-bottom-2x" role="group">
                                        <button type="button" class="btn btn-default"><i class="fa fa-user"></i> Profile</button>
                                        <button type="button" class="btn btn-default"><i class="fa fa-sign-out"></i> Logout</button>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
                <div id="bankList">
                    <div style="width: 100%;height: 100%;">
                        <div style="width: 100%;height: 100%; margin: 10px 28%;">
                            <form class="form-inline">
                                <div class="form-group">
                                    <input type="text" class="form-control searchName" id="exampleInputName2" placeholder="银行名称">
                                </div>
                                <button type="button" class="btn btn-default searchBankName" id="searchBankName"  >查询</button>
                                <button type="button" class="btn btn-success" style="margin-left: 100px;"  v-on:click="addBankEntity()">增加</button>
                            </form>
                        </div>
                        <table class="table table-hover table-condensed">
                            <!-- On rows -->
                            <thead>
                            <th class="info" style="text-align: center;width: 50px">ID</th>
                            <th class="info" style="text-align: center;width: 200px">银行名称</th>
                            <th class="info" style="text-align: center;width: 150px">合作开始时间</th>
                            <th class="info" style="text-align: center;width: 600px">备注</th>
                            <th class="info" style="text-align: center;width: 200px">操作</th>
                            </thead>
                            <tr v-for="bank in bank_List">
                                <td class="active" style="text-align: center;width: 50px">{{bank.bankId}}</td>
                                <td class="active" style="text-align: center;width: 200px">{{bank.bankName}}</td>
                                <td class="active" style="text-align: center;width: 150px">{{new Date(bank.bankDate).toLocaleDateString()}}</td>
                                <td class="active" style="text-align: center;width: 600px">{{bank.bankRemark}}</td>
                                <td class="active" style="text-align: center;width: 200px">
                                    <button type="button" class="btn btn-danger btn-xs" v-on:click="deleteBankId(selectedId=bank.bankId)">删除</button>
                                    <button type="button" class="btn btn-warning btn-xs" v-on:click="updateBankEntity(bank.bankId)" >修改</button></td>
                            </tr>
                            <tr>
                                <td colspan="5">
                                    <div class="_page" style="float:right;">
                                        <div class="go" v-on:click="currentIndex==1?'':go('back')" :class="{disabled_:currentIndex==1}">上一页</div>
                                        <div class="ps">
                                            <span class="pi" v-on:click="go(1)" v-if="currentIndex>2">1</span>
                                            {{currentIndex>2?'...':''}}
                                            <span class="pi" :class="{selected:i==currentIndex}" v-on:click="go(i)" v-for="i in maxPage" v-if="i>=currentIndex&&i<currentIndex+4">{{i}}</span>
                                            {{currentIndex<(maxPage-3)?'...':''}}
                                            <span class="pi" v-on:clickonclick="go(maxPage)" v-if="currentIndex<(maxPage-3)">{{maxPage}}</span>
                                        </div>
                                        <div class="go" v-on:click="currentIndex==maxPage?'':go('next')" :class="{disabled_:currentIndex==maxPage}">下一页</div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <!-- 模态弹出框 begin -->
                    <div class="modal fade" id="bankModal" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">{{modalTitle}}</h4>
                                </div>
                                <div class="modal-body">
                                    <form>
                                        <div class="form-group">
                                            <label  class="control-label">银行名称:</label>
                                            <input type="text" class="form-control" id="bankName" v-model="bankEntity.bankName">
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">备注:</label>
                                            <textarea type="text" class="form-control" id="bankRemark" v-model="bankEntity.bankRemark">
                                            </textarea>
                                        </div>
                                    </form>

                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">取消</button>
                                    <button type="button" class="btn btn-success" v-on:click="save()">保存</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 模态弹出框 end -->
                    <!-- 删除的的模态框 begin -->
                    <div class="modal fade" data-backdrop="false" id="deleteBankModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">删除提示</h4>
                                </div>
                                <div class="modal-body">
                                    <h2 style="text-align: center;">确定要删除吗？</h2>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">取消</button>
                                    <button type="button" class="btn btn-success" v-on:click="deleteBankEntity(selectedId)">确定</button>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- 删除的的模态框 end -->
                    </div>
            </div>
        </nav>
        <div class="side-menu sidebar-inverse">
            <nav class="navbar navbar-default" role="navigation">
                <div class="side-menu-container">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">
                            <div class="icon fa fa-paper-plane"></div>
                            <div class="title">后台管理</div>
                        </a>
                        <button type="button" class="navbar-expand-toggle pull-right visible-xs">
                            <i class="fa fa-times icon"></i>
                        </button>
                    </div>
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="../index.html">
                                <span class="icon fa fa-tachometer"></span><span class="title">首页</span>
                            </a>
                        </li>
                        <li class=" panel panel-default dropdown">
                            <a data-toggle="collapse" href="#dropdown-element">
                                <span class="icon fa fa-desktop"></span><span class="title">产品管理</span>
                            </a>
                            <!-- Dropdown level 1 -->
                            <div id="dropdown-element" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <ul class="nav navbar-nav">
                                        <li><a href="../product/cfy.html">财富云端产品管理</a>
                                        </li>
                                        <li><a href="../product/investment.html">投资类产品</a>
                                        </li>
                                        <li><a href="../product/fund.html">基金产品</a>
                                        </li>
                                        <li><a href="../product/Small.html">小额理财</a>
                                        </li>
                                        <li><a href="../product/insurance.html">保险产品</a>
                                        </li>
                                        <li><a href="../product/other.html">其他</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <li class=" panel panel-default dropdown">
                            <a data-toggle="collapse" href="#dropdown-table">
                                <span class="icon fa fa-table"></span><span class="title">客户管理</span>
                            </a>
                            <!-- Dropdown level 1 -->
                            <div id="dropdown-table" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <ul class="nav navbar-nav">
                                        <li><a href="../customer/information.html">客户信息管理</a>
                                        </li>
                                        <li><a href="../customer/service.html">客户服务管理</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <li class="panel panel-default dropdown">
                            <a data-toggle="collapse" href="#dropdown-form">
                                <span class="icon fa fa-file-text-o"></span><span class="title">交易管理</span>
                            </a>
                            <!-- Dropdown level 1 -->
                            <div id="dropdown-form" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <ul class="nav navbar-nav">
                                        <li><a href="../transaction/ui-kits.html">交易审核</a>
                                        </li>
                                        <li><a href="../transaction/ui-kits.html">订单管理</a>
                                        </li>
                                        <li><a href="../transaction/ui-earnings.html">收益分配管理</a>
                                        </li>
                                        <li><a href="../transaction/ui-withdraw.html">提现管理</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <!-- Dropdown-->
                        <li class="panel panel-default dropdown">
                            <a data-toggle="collapse" href="#component-example">
                                <span class="icon fa fa-cubes"></span><span class="title">员工管理</span>
                            </a>
                            <!-- Dropdown level 1 -->
                            <div id="component-example" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <ul class="nav navbar-nav">
                                        <li><a href="../staff/components.html">员工信息管理</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <!-- Dropdown-->
                        <li class="active panel panel-default dropdown">
                            <a data-toggle="collapse" href="#dropdown-example">
                                <span class="icon fa fa-slack"></span><span class="title">合作管理</span>
                            </a>
                            <!-- Dropdown level 1 -->
                            <div id="dropdown-example" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <ul class="nav navbar-nav">
                                        <li><a href="../cooperative/bank.html">合作银行管理</a>
                                        </li>
                                        <li><a href="../cooperative/bankcard.html">银行卡管理</a>
                                        </li>
                                        <li><a href="../cooperative/company.html">合作公司/机构管理</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <!-- Dropdown-->
                        <li class=" panel panel-default dropdown">
                            <a data-toggle="collapse" href="#dropdown-icon">
                                <span class="icon fa fa-archive"></span><span class="title">数据报表</span>
                            </a>
                            <!-- Dropdown level 1 -->
                            <div id="dropdown-icon" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <ul class="nav navbar-nav">
                                        <li><a href="../data/performance.html">理财师业绩表	</a>
                                        </li>
                                        <li><a href="../data/market.html">产品销售情况表</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <li class="panel panel-default dropdown">
                            <a data-toggle="collapse" href="#system">
                                <span class="icon fa fa-thumbs-o-up"></span><span class="title">系统管理</span>
                            </a>
                            <!-- Dropdown level 1 -->
                            <div id="system" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <ul class="nav navbar-nav">
                                        <li><a href="../system/position.html">职位管理</a>
                                        </li>
                                        <li><a href="../system/power.html">权限管理</a>
                                        </li>
                                        <li><a href="../system/department.html">部门管理</a>
                                        </li>
                                        <li><a href="../system/database.html">数据库备份</a>
                                        </li>
                                        <li><a href="../system/password.html">修改密码</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->
            </nav>
        </div>
        <!-- Main Content -->


    </div>
</div>

<div id="code-preview-alert">

</div>

<script type="text/javascript" src="../../lib/js/jquery.min.js"></script>
<script type="text/javascript" src="../../lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../lib/js/Chart.min.js"></script>
<script type="text/javascript" src="../../lib/js/bootstrap-switch.min.js"></script>

<script type="text/javascript" src="../../lib/js/jquery.matchHeight-min.js"></script>
<script type="text/javascript" src="../../lib/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="../../lib/js/dataTables.bootstrap.min.js"></script>
<script type="text/javascript" src="../../lib/js/select2.full.min.js"></script>
<script type="text/javascript" src="../../lib/js/ace/ace.js"></script>
<script type="text/javascript" src="../../lib/js/ace/ace.js"></script>
<script type="text/javascript" src="../../lib/js/ace/mode-html.js"></script>
<script type="text/javascript" src="../../lib/js/ace/theme-github.js"></script>
<!-- Javascript -->
<script type="text/javascript" src="../../js/app.js"></script>
<script type="text/javascript" src="../../js/alert.js"></script>
<!-- VUE.js-->
<script type="text/javascript" src="../../js/vue/vue.js"></script>
</body>
<script>
    var pageIndex = 1;
    var searchValue="";
    var bank_Vue = new Vue({
        el : "#bankList",
        data : {
            bankEntity : {bankId :"",bankName : "",bankDate : "",bankRemark: ""},
            bank_List : [],
            maxPage : "",
            modalTitle : "增加",
            saveUrl : "",
            selectedId : "",
            currentIndex : 1
        },
        methods:{
            getall : function(){
                var _this = this;
                searchValue=$("#exampleInputName2").val();
                pageIndex=this.currentIndex;
                $.get("../../bank/selectWhere.action",{"bankName":searchValue,"index":pageIndex},function(data){
                    _this._data.bank_List = data.rowsList;
                    _this._data.maxPage = data.totals;
                });
            },
            go:function(_page){
                if(_page == "back"){
                    this.currentIndex = this.currentIndex - (this.currentIndex > 1 ? 1 : 0);
                }else if(_page == "next"){
                    this.currentIndex = this.currentIndex + (this.currentIndex < this.maxPage ? 1 : 0);
                }else{
                    this.currentIndex = _page;
                }
                this.getall();
            },
            addBankEntity : function(){
                this.saveUrl = "../../bank/addTb_Bank.action";
                this.modalTitle = "增加";
                this.bankEntity = {};
                this.modalShow();
            },
            get : function(id){
                var _this = this;
                $.ajax({
                    url : "../../bank/getById.action",
                    data : {bankId : id},
                    dataType : "JSON",
                    success : function(data){
                        _this.bankEntity = data;
                    }
                });
            },
            updateBankEntity : function(id){
                this.saveUrl = "../../bank/updateTb_Bank.action";
                this.modalTitle = "修改";
                this.get(id);
                this.modalShow();
            },
            save : function(){
                var _this = this;
                $.ajax({
                    url : _this.saveUrl,
                    data : {bankEntity : JSON.stringify(_this.bankEntity)},
                    type : "post",
                    success : function(data){
                        if(data){
                            _this.modalHide();
                            _this._data.currentIndex=1;
                            _this.getall();
                        }
                    }
                });
            },
            deleteBankId : function(id){
                this.deleteModalShow();
            },
            deleteBankEntity : function(id){
                var _this = this;
                $.ajax({
                    url : "../../bank/deleteTb_Bank.action",
                    data : "bankId="+id,
                    type : "post",
                    success : function(data){
                        if(data){
                            _this.deleteModalHide();
                            _this._data.currentIndex=1;
                            _this.getall();

                        }
                    }
                });
            },
            //模态框隐藏
            modalHide : function(){
                $("#bankModal").modal("hide");
            },
            //删除模态框隐藏
            deleteModalHide : function(){
                $("#deleteBankModal").modal("hide");
            },
            //删除模态框隐藏
            deleteModalShow : function(){
                $("#deleteBankModal").modal("show");
            },
            //模态框显示
            modalShow : function(){
                $("#bankModal").modal("show");
            },
        },
        created : function(){
            this.getall();
        }
    })



    $(document).ready(function() {
        $(".searchBankName").click(function () { // 模糊查询
            searchValue = $("#exampleInputName2").val();
          $.post("../../bank/selectWhere.action",{"bankName":searchValue,"index":pageIndex},function (data) {
              bank_Vue._data.bank_List = data.rowsList;
              bank_Vue._data.maxPage = data.totals;
          });
        })
    })



    //        })

</script>
<script>

</script>
</html>
